{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/e-complain-box/packages/frontend/src/components/PublicDashboard/PublicDashboard.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { Grid } from '@mui/material';\nimport TodayRecord from './TodayRecord';\nimport { Fragment } from 'react';\nimport VerticalChart from './VerticalChart';\nimport PieChart from './PieChart';\nimport { connect } from 'react-redux';\nimport { useState } from 'react';\nimport Loader from '../../Shared/common/Loader';\nimport \"./styles/Dashboard.css\";\nimport LoggedUserInfo from '../../Shared/common/LoggedUserInfo';\nimport DashboardTable from './DashboardTable';\nimport { publicComplain, getComplainGroupData, getPublicComplainGroupData } from '../../Shared/Api/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PublicDashboard(_ref) {\n  _s();\n\n  let {\n    auth\n  } = _ref;\n  const [totalData, setTotalData] = useState(null);\n  const [totalRasiedData, setTotalRasiedData] = useState([]);\n  const [totalInComplainData, setTotalInComplainData] = useState([]);\n  const [totalDoneData, setTotalDoneData] = useState([]);\n  const [totalBorderColor, setTotalBorderColod] = useState([]);\n  const [totalBackgroundColor, setTotalBackgroundColor] = useState([]);\n  const [dataChanged, setdataChanged] = useState(false);\n  const [totalDepartments, setTotalDepartments] = useState([]);\n  const [loaded, setLoaded] = React.useState(true);\n  useEffect(() => {\n    const userId = localStorage.getItem(\"userID\");\n\n    if (userId) {\n      getPublicComplainGroupData(userId).then(res => {\n        res.length && res.forEach(datas => {\n          let firstnumber = Math.floor(Math.random() * 256);\n          let secondnumber = Math.floor(Math.random() * 256);\n          let thirdnumber = Math.floor(Math.random() * 256);\n          let backgroundColor = `rgba(${firstnumber}, ${secondnumber}, ${thirdnumber}, 0.8)`;\n          let borderColor = `rgba(${firstnumber}, ${secondnumber}, ${thirdnumber}, 1)`;\n          setTotalRasiedData(totalRasiedData => [...totalRasiedData, datas.totalRaiseComplains]);\n          setTotalInComplainData(totalInComplainData => [...totalInComplainData, datas.totalWipComplains]);\n          setTotalDoneData(totalDoneData => [...totalDoneData, datas.totalCompletedComplains]);\n          setTotalBackgroundColor(totalBackgroundColor => [...totalBackgroundColor, backgroundColor]);\n          setTotalBorderColod(totalBorderColor => [...totalBorderColor, borderColor]);\n          setTotalDepartments(totalDepartments => [...totalDepartments, datas.DepartmentName ? datas.DepartmentName : datas.DepartmentNam]);\n        });\n        setTotalData(res);\n        setLoaded(false);\n      });\n    }\n  }, [setLoaded, setTotalData]);\n  const showTotalRaised = totalRasiedData.filter(numbers => numbers !== 0).reduce((sum, data) => {\n    return sum += data;\n  }, 0);\n  const showTotalInProgress = totalInComplainData.filter(numbers => numbers !== 0).reduce((sum, data) => {\n    return sum += data;\n  }, 0);\n  const showTotalDone = totalDoneData.filter(numbers => numbers !== 0).reduce((sum, data) => {\n    return sum += data;\n  }, 0);\n  console.log(totalData);\n  return loaded || !totalData ? /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    px: 12,\n    style: {\n      height: \"100%\"\n    },\n    children: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 6\n  }, this) : /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [auth.user ? /*#__PURE__*/_jsxDEV(LoggedUserInfo, {\n      auth: auth\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 14\n    }, this) : \"\", /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      display: \"flex\",\n      alignItems: \"flex-start\",\n      mb: 3,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        pl: {\n          xs: 2,\n          sm: 4,\n          md: 8\n        },\n        pr: {\n          xs: 2,\n          sm: 4,\n          md: 0\n        },\n        item: true,\n        md: 8,\n        children: [/*#__PURE__*/_jsxDEV(DashboardTable, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TodayRecord, {\n          showTotalRaised: showTotalRaised,\n          showTotalInProgress: showTotalInProgress,\n          showTotalDone: showTotalDone\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(VerticalChart, {\n          totalRasiedData: totalRasiedData,\n          totalDepartments: totalDepartments,\n          totalInComplainData: totalInComplainData,\n          totalDoneData: totalDoneData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(PieChart, {\n        totalRasiedData: totalRasiedData,\n        showTotalRaised: showTotalRaised,\n        showTotalInProgress: showTotalInProgress,\n        showTotalDone: showTotalDone,\n        totalInComplainData: totalInComplainData,\n        totalDoneData: totalDoneData,\n        totalBackgroundColor: totalBackgroundColor,\n        totalBorderColor: totalBorderColor,\n        totalDepartments: totalDepartments,\n        auth: auth\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 7\n  }, this);\n}\n\n_s(PublicDashboard, \"HvmOG2E2H+qgYzNpXUP990baa3o=\");\n\n_c = PublicDashboard;\n\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps)(PublicDashboard);\n\nvar _c;\n\n$RefreshReg$(_c, \"PublicDashboard\");","map":{"version":3,"sources":["/Applications/MAMP/htdocs/e-complain-box/packages/frontend/src/components/PublicDashboard/PublicDashboard.jsx"],"names":["React","useEffect","Grid","TodayRecord","Fragment","VerticalChart","PieChart","connect","useState","Loader","LoggedUserInfo","DashboardTable","publicComplain","getComplainGroupData","getPublicComplainGroupData","PublicDashboard","auth","totalData","setTotalData","totalRasiedData","setTotalRasiedData","totalInComplainData","setTotalInComplainData","totalDoneData","setTotalDoneData","totalBorderColor","setTotalBorderColod","totalBackgroundColor","setTotalBackgroundColor","dataChanged","setdataChanged","totalDepartments","setTotalDepartments","loaded","setLoaded","userId","localStorage","getItem","then","res","length","forEach","datas","firstnumber","Math","floor","random","secondnumber","thirdnumber","backgroundColor","borderColor","totalRaiseComplains","totalWipComplains","totalCompletedComplains","DepartmentName","DepartmentNam","showTotalRaised","filter","numbers","reduce","sum","data","showTotalInProgress","showTotalDone","console","log","height","user","xs","sm","md","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { Grid } from '@mui/material';\nimport TodayRecord from './TodayRecord';\nimport { Fragment } from 'react';\nimport VerticalChart from './VerticalChart';\nimport PieChart from './PieChart';\nimport { connect } from 'react-redux';\nimport { useState } from 'react';\nimport Loader from '../../Shared/common/Loader';\nimport \"./styles/Dashboard.css\"\nimport LoggedUserInfo from '../../Shared/common/LoggedUserInfo';\nimport DashboardTable from './DashboardTable';\nimport { publicComplain, getComplainGroupData, getPublicComplainGroupData } from '../../Shared/Api/api';\n\nfunction PublicDashboard({ auth }) {\n  const [totalData, setTotalData] = useState(null)\n  const [totalRasiedData, setTotalRasiedData] = useState([])\n  const [totalInComplainData, setTotalInComplainData] = useState([])\n  const [totalDoneData, setTotalDoneData] = useState([])\n  const [totalBorderColor, setTotalBorderColod] = useState([])\n  const [totalBackgroundColor, setTotalBackgroundColor] = useState([])\n  const [dataChanged, setdataChanged] = useState(false)\n  const [totalDepartments, setTotalDepartments] = useState([])\n  const [loaded, setLoaded] = React.useState(true);\n  useEffect(() => {\n    const userId = localStorage.getItem(\"userID\")\n    if (userId) {\n      getPublicComplainGroupData(userId).then((res) => {\n        res.length && res.forEach(datas => {\n          let firstnumber = Math.floor(Math.random() * 256);\n          let secondnumber = Math.floor(Math.random() * 256);\n          let thirdnumber = Math.floor(Math.random() * 256);\n          let backgroundColor = `rgba(${firstnumber}, ${secondnumber}, ${thirdnumber}, 0.8)`;\n          let borderColor = `rgba(${firstnumber}, ${secondnumber}, ${thirdnumber}, 1)`;\n\n          setTotalRasiedData((totalRasiedData) => [\n            ...totalRasiedData,\n            datas.totalRaiseComplains,\n          ]);\n          setTotalInComplainData((totalInComplainData) => [\n            ...totalInComplainData,\n            datas.totalWipComplains,\n          ]);\n          setTotalDoneData((totalDoneData) => [\n            ...totalDoneData,\n            datas.totalCompletedComplains,\n          ]);\n          setTotalBackgroundColor((totalBackgroundColor) => [\n            ...totalBackgroundColor,\n            backgroundColor,\n          ]);\n          setTotalBorderColod((totalBorderColor) => [\n            ...totalBorderColor,\n            borderColor,\n          ]);\n          setTotalDepartments((totalDepartments) => [\n            ...totalDepartments,\n            datas.DepartmentName ? datas.DepartmentName : datas.DepartmentNam,\n          ]);\n\n        })\n        setTotalData(res)\n        setLoaded(false)\n      })\n    }\n\n  }, [setLoaded, setTotalData]);\n  const showTotalRaised = totalRasiedData.filter(numbers => numbers !== 0).reduce((sum, data) => {\n    return sum += data\n  }, 0)\n  const showTotalInProgress = totalInComplainData.filter(numbers => numbers !== 0).reduce((sum, data) => {\n    return sum += data\n  }, 0)\n  const showTotalDone = totalDoneData.filter(numbers => numbers !== 0).reduce((sum, data) => {\n    return sum += data\n  }, 0)\n  console.log(totalData)\n  return loaded || !totalData ?\n    (<Grid container px={12} style={{ height: \"100%\" }}>\n      <Loader />\n    </Grid>) : (\n      <Fragment>\n        {\n          auth.user ?\n            (<LoggedUserInfo auth={auth} />)\n            :\n            \"\"\n        }\n\n        {/* {auth.user ? (<Grid container mt={12} pl={{ xs: 2, sm: 4, md: 8 }}><Typography style={{ fontWeight: \"bold\", fontSize: \"20px\" }}>Welcome {auth.user ? auth.user.FullName : \"\"}</Typography></Grid>\n        ) : \"\"\n        } */}\n        <Grid container display=\"flex\" alignItems=\"flex-start\" mb={3}>\n          <Grid container pl={{ xs: 2, sm: 4, md: 8 }} pr={{ xs: 2, sm: 4, md: 0 }} item md={8}>\n            <DashboardTable />\n            <TodayRecord showTotalRaised={showTotalRaised} showTotalInProgress={showTotalInProgress} showTotalDone={showTotalDone} />\n            <VerticalChart\n              totalRasiedData={totalRasiedData}\n              totalDepartments={totalDepartments}\n              totalInComplainData={totalInComplainData}\n              totalDoneData={totalDoneData}\n            />\n          </Grid>\n          <PieChart totalRasiedData={totalRasiedData}\n            showTotalRaised={showTotalRaised}\n            showTotalInProgress={showTotalInProgress}\n            showTotalDone={showTotalDone}\n            totalInComplainData={totalInComplainData}\n            totalDoneData={totalDoneData}\n            totalBackgroundColor={totalBackgroundColor}\n            totalBorderColor={totalBorderColor}\n            totalDepartments={totalDepartments}\n            auth={auth}\n          />\n        </Grid>\n      </Fragment >\n    );\n}\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n});\nexport default connect(mapStateToProps)(PublicDashboard);"]},"metadata":{},"sourceType":"module"}