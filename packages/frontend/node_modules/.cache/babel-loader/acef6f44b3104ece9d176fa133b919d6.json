{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/e-complain-box/packages/frontend/src/components/Dashboard/DashboardTable.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport Paper from '@mui/material/Paper';\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableHead from '@mui/material/TableHead';\nimport TablePagination from '@mui/material/TablePagination';\nimport TableRow from '@mui/material/TableRow';\nimport { Grid, Typography } from '@mui/material';\nimport { columns } from './TableData';\nimport moment from 'moment';\nimport PanelHeader from '../../Shared/common/PanelHeader';\nimport { getDashboardData } from \"../../Shared/Api/api\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction DashboardTable(_ref) {\n  _s();\n\n  let {\n    auth\n  } = _ref;\n  const [rows, setRows] = React.useState([]);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [page, setPage] = React.useState(0);\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\n  let history = useHistory();\n  useEffect(() => {\n    if (auth.user && auth.user.UserRole === \"Department Employee\") {\n      getDashboardData(page, rowsPerPage, \"department\", auth.user.UserDepartmentId).then(res => {\n        setRows(res);\n      });\n    } else if (auth.user && auth.user.UserRole === \"Complainant\") {\n      getDashboardData(page, rowsPerPage, \"complainant\", auth.user.id).then(res => {\n        setRows(res);\n      });\n    } else {\n      getDashboardData(page, rowsPerPage, null, null).then(res => {\n        setRows(res);\n      });\n    }\n  }, [setRowsPerPage, setRows, auth.user, rowsPerPage, page]);\n\n  const redirectToSingleComplain = id => {\n    console.log(id);\n    history.push(`complain-department-details/${id}`);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(+event.target.value);\n    setPage(0);\n  };\n\n  function toDateTime(secs) {\n    var t = new Date(Date.UTC(1970, 0, 1)); // Epoch\n\n    t.setUTCSeconds(secs);\n    return moment(t).format('MMMM Do YYYY, h:mm:ss a');\n  }\n\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    children: [/*#__PURE__*/_jsxDEV(PanelHeader, {\n      title: auth.user.UserRole === \"Complainant\" ? \"My Complaints\" : \"All Complaints\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TableContainer, {\n        sx: {\n          maxHeight: 440\n        },\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          \"aria-label\": \"sticky table\",\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: columns.map(column => /*#__PURE__*/_jsxDEV(TableCell, {\n                align: column.align,\n                style: {\n                  top: 57,\n                  minWidth: column.minWidth\n                },\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  style: {\n                    fontWeight: \"bolder\"\n                  },\n                  children: column.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 76,\n                  columnNumber: 41\n                }, this)\n              }, column.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: rows && rows.length && rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(row => {\n              return /*#__PURE__*/_jsxDEV(TableRow, {\n                hover: true,\n                role: \"checkbox\",\n                tabIndex: -1,\n                style: {\n                  cursor: \"pointer\"\n                },\n                children: columns.map(column => {\n                  let columnValue = row.hasOwnProperty(column.id);\n                  const value = column.id === \"CreatedAt\" ? toDateTime(row[column.id]._seconds) : row[column.id];\n                  const id = row.id;\n                  return /*#__PURE__*/_jsxDEV(TableCell, {\n                    align: column.align,\n                    onClick: () => redirectToSingleComplain(row.id),\n                    children: column.format && typeof value === 'number' ? column.format(value) : value\n                  }, column.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 92,\n                    columnNumber: 53\n                  }, this);\n                })\n              }, row.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 41\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TablePagination, {\n        rowsPerPageOptions: [3, 10, 25, 100, rows.length],\n        component: \"div\",\n        count: rows && rows.length,\n        rowsPerPage: rowsPerPage,\n        page: page,\n        onPageChange: handleChangePage,\n        onRowsPerPageChange: handleChangeRowsPerPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n}\n\n_s(DashboardTable, \"rRLR3iAz+GT1HXB0mNdhr9UHgZs=\", false, function () {\n  return [useHistory];\n});\n\n_c = DashboardTable;\n\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps)(DashboardTable);\n\nvar _c;\n\n$RefreshReg$(_c, \"DashboardTable\");","map":{"version":3,"sources":["/Applications/MAMP/htdocs/e-complain-box/packages/frontend/src/components/Dashboard/DashboardTable.jsx"],"names":["React","useState","useEffect","connect","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TablePagination","TableRow","Grid","Typography","columns","moment","PanelHeader","getDashboardData","useHistory","DashboardTable","auth","rows","setRows","anchorEl","setAnchorEl","page","setPage","rowsPerPage","setRowsPerPage","history","user","UserRole","UserDepartmentId","then","res","id","redirectToSingleComplain","console","log","push","handleChangePage","event","newPage","handleChangeRowsPerPage","target","value","toDateTime","secs","t","Date","UTC","setUTCSeconds","format","width","maxHeight","map","column","align","top","minWidth","fontWeight","label","length","slice","row","cursor","columnValue","hasOwnProperty","_seconds","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport Paper from '@mui/material/Paper';\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableHead from '@mui/material/TableHead';\nimport TablePagination from '@mui/material/TablePagination';\nimport TableRow from '@mui/material/TableRow';\nimport { Grid, Typography } from '@mui/material';\nimport { columns } from './TableData';\nimport moment from 'moment'\nimport PanelHeader from '../../Shared/common/PanelHeader';\nimport { getDashboardData } from \"../../Shared/Api/api\"\nimport { useHistory } from \"react-router-dom\"\n\n\nfunction DashboardTable({ auth }) {\n    const [rows, setRows] = React.useState([]);\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [page, setPage] = React.useState(0);\n    const [rowsPerPage, setRowsPerPage] = React.useState(10);\n    let history = useHistory()\n\n    useEffect(() => {\n        if (auth.user && auth.user.UserRole === \"Department Employee\") {\n            getDashboardData(page, rowsPerPage, \"department\", auth.user.UserDepartmentId).then((res) => {\n                setRows(res);\n            })\n        } else if (auth.user && auth.user.UserRole === \"Complainant\") {\n            getDashboardData(page, rowsPerPage, \"complainant\", auth.user.id).then((res) => {\n                setRows(res);\n            })\n        } else {\n            getDashboardData(page, rowsPerPage, null, null).then((res) => {\n                setRows(res);\n            })\n        }\n\n    }, [setRowsPerPage, setRows, auth.user, rowsPerPage, page]);\n\n    const redirectToSingleComplain = (id) => {\n        console.log(id)\n\n        history.push(`complain-department-details/${id}`)\n    }\n\n\n    const handleChangePage = (event, newPage) => {\n        setPage(newPage);\n    };\n    const handleChangeRowsPerPage = (event) => {\n        setRowsPerPage(+event.target.value);\n        setPage(0);\n    };\n    function toDateTime(secs) {\n        var t = new Date(Date.UTC(1970, 0, 1)); // Epoch\n        t.setUTCSeconds(secs);\n        return moment(t).format('MMMM Do YYYY, h:mm:ss a')\n    }\n    return (\n        <Grid container >\n            <PanelHeader title={auth.user.UserRole === \"Complainant\" ? \"My Complaints\" : \"All Complaints\"} />\n            <Paper sx={{ width: '100%' }}>\n                <TableContainer sx={{ maxHeight: 440 }}>\n                    <Table aria-label=\"sticky table\">\n                        <TableHead>\n                            <TableRow>\n                                {columns.map((column) => (\n                                    <TableCell\n                                        key={column.id}\n                                        align={column.align}\n                                        style={{ top: 57, minWidth: column.minWidth }}\n                                    >\n                                        <Typography style={{ fontWeight: \"bolder\" }}>{column.label}</Typography>\n                                    </TableCell>\n                                ))}\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            {rows && rows.length && rows\n                                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                                .map((row) => {\n                                    return (\n                                        <TableRow hover role=\"checkbox\" tabIndex={-1} key={row.id} style={{ cursor: \"pointer\" }}>\n                                            {columns.map((column) => {\n                                                let columnValue = row.hasOwnProperty(column.id)\n                                                const value = column.id === \"CreatedAt\" ? toDateTime(row[column.id]._seconds) : row[column.id]\n                                                const id = row.id\n                                                return (\n                                                    <TableCell key={column.id} align={column.align} onClick={() => redirectToSingleComplain(row.id)}>\n                                                        {column.format && typeof value === 'number'\n                                                            ? column.format(value)\n                                                            : value}\n                                                    </TableCell>\n                                                );\n                                            })}\n                                        </TableRow>\n                                    );\n                                })}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n                {/* <input type=\"number\" name=\"rowss\"></input> */}\n\n                <TablePagination\n                    rowsPerPageOptions={[3, 10, 25, 100, rows.length]}\n                    component=\"div\"\n                    count={rows && rows.length}\n                    rowsPerPage={rowsPerPage}\n                    page={page}\n                    onPageChange={handleChangePage}\n                    onRowsPerPageChange={handleChangeRowsPerPage}\n                />\n            </Paper>\n        </Grid>\n    );\n}\nconst mapStateToProps = (state) => ({\n    auth: state.auth,\n});\nexport default connect(mapStateToProps)(DashboardTable);\n"]},"metadata":{},"sourceType":"module"}